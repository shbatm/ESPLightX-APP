!function(o,e){"undefined"!=typeof module&&module.exports?(e("undefined"==typeof angular?require("angular"):angular),module.exports="color.picker.core"):"function"==typeof define&&define.amd?define(["angular"],e):e(o.angular)}(this,function(o){"use strict";function e(o,e){function t(){p.classList.add("click-color"),d()?(b.onSelect({color:b.selectedColor}),e.publish("selected",b.selectedColor),e.publish("hide",b.selectedColor),m.classList.add("color-shadow-animate")):(e.publish("show",b.selectedColor),v.classList.add("blur-palette-in"),v.classList.remove("blur-palette-out"))}function n(o){var t=100,n=50,r=1,l="hsla("+o+", "+t+"%, "+n+"%, "+r+")",i=e.hslToRgb(o,t,n),s=e.hslToHex(o,t,n);p.style.backgroundColor=l,m.style.borderColor=l,b.angle=o,b.selectedColor={hex:s,hsla:{hue:o,saturation:t,luminosity:n,alpha:r},rgba:{red:i.red,green:i.green,blue:i.blue,alpha:r}}}function r(){f=o[0].querySelector(".rotator"),g=o[0].querySelector(".knob"),p=o[0].querySelector(".color"),m=o[0].querySelector(".color-shadow"),v=o[0].querySelector(".color-palette"),p.addEventListener("animationend",s),g.addEventListener("transitionend",a),m.addEventListener("animationend",c),v.addEventListener("transitionend",u),l.call(this)}function l(){this.color&&"red"in this.color&&"green"in this.color&&"blue"in this.color?this.angle=e.rgbToHsl(this.color.red,this.color.green,this.color.blue).hue:this.angle=0}function i(){p.removeEventListener("animationend",s),g.removeEventListener("transitionend",a),m.removeEventListener("animationend",c),v.removeEventListener("transitionend",u),g=null,f=null,p=null,m=null,v=null,e.unsubscribe()}function s(){h()?(g.classList.add("zoom-knob-out"),g.classList.remove("zoom-knob-in")):(g.classList.add("zoom-knob-in"),g.classList.remove("zoom-knob-out")),p.classList.remove("click-color")}function a(o){"transform"===o.propertyName&&(h()?e.publish("shown",b.selectedColor):(v.classList.add("blur-palette-out"),v.classList.remove("blur-palette-in")))}function c(){m.classList.remove("color-shadow-animate")}function u(o){"transform"===o.propertyName&&(d()?(g.classList.add("zoom-knob-in"),g.classList.remove("zoom-knob-out")):e.publish("hidden",b.selectedColor))}function d(){var o=v.classList.contains("blur-palette-in"),e=v.classList.contains("blur-palette-out");return o||!o&&!e}function h(){return!g.classList.contains("zoom-knob-out")}var b=this;this.$onInit=r,this.$onDestroy=i,this.$onChanges=l,this.onColorSelClick=t,this.onRotatorDrag=n;var g,f,p,m,v;e.subscribe("open",function(){d()||(e.publish("show",b.selectedColor),v.classList.add("blur-palette-in"),v.classList.remove("blur-palette-out"))}),e.subscribe("close",function(){d()&&(e.publish("hide",b.selectedColor),g.classList.add("zoom-knob-out"),g.classList.remove("zoom-knob-in"))})}function t(){function o(o,e){o.angle=o.angle||0;var t=new Propeller(e[0],{angle:o.angle,inertia:.7,speed:0,onRotate:function(e){o.onRotate({angle:this.angle})},onDragStart:function(){e.addClass("dragging")},onDragStop:function(){e.removeClass("dragging")}});o.$watch("angle",function(e){t.angle=e,o.onRotate({angle:e})}),o.$on("$destroy",function(){t.stop(),t.unbind(),t=null})}var e={link:o,restrict:"A",scope:{onRotate:"&",angle:"<"}};return e}function n(o){function e(e,t){o.$applyAsync(function(){o.$broadcast(u+e,t)})}function t(e,t){var n=o.$on(u+e,t);return c.push(n),n}function n(){c.forEach(function(o){o()})}function r(o,e,t){return((1<<24)+(o<<16)+(e<<8)+t).toString(16).slice(1)}function l(o,e,t){o/=255,e/=255,t/=255;var n,r,l=Math.max(o,e,t),i=Math.min(o,e,t),s=(l+i)/2;if(l===i)n=r=0;else{var a=l-i;r=s>.5?a/(2-l-i):a/(l+i),l===o&&(n=(e-t)/a+(e<t?6:0)),l===e&&(n=(t-o)/a+2),l===t&&(n=(o-e)/a+4)}return{hue:60*n,saturation:100*r,luminosity:100*s}}function i(o,e,t){var n=s(o,e,t);return r(n.red,n.green,n.blue)}function s(o,e,t){var n,r,l;if(o/=360,e/=100,t/=100,0===e)n=r=l=t;else{var i=t<.5?t*(1+e):t+e-t*e,s=2*t-i;n=a(s,i,o+1/3),r=a(s,i,o),l=a(s,i,o-1/3)}return{red:Math.round(255*n),green:Math.round(255*r),blue:Math.round(255*l)}}function a(o,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?o+6*(e-o)*t:t<.5?e:t<2/3?o+(e-o)*(2/3-t)*6:o}this.publish=e,this.subscribe=t,this.unsubscribe=n,this.rgbToHex=r,this.rgbToHsl=l,this.hslToRgb=s,this.hslToHex=i;var c=[],u="color-picker."}e.$inject=["$element","ColorPickerService"],n.$inject=["$rootScope"],o.module("color.picker.core",[]).component("colorPicker",{bindings:{onSelect:"&",color:"<?ngModel"},controller:e,template:'<div class="rotator" color-picker-rotator on-rotate="$ctrl.onRotatorDrag(angle)" angle="$ctrl.angle"><div class="knob"></div></div><button type="button" class="color" ng-click="$ctrl.onColorSelClick()"></button><div class="color-shadow"></div><div class="color-palette"></div>'}),o.module("color.picker.core").directive("colorPickerRotator",t),o.module("color.picker.core").service("ColorPickerService",n)});
//# sourceMappingURL=color-picker.min.js.map